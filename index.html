<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japan 2026 | åŒ—æµ·é“ä¹‹å†¬</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        body {
            font-family: 'Noto-Sans TC', sans-serif;
            background-color: #E6F2F8; /* å»¶ä¼¸åœ–ç‰‡åº•è‰²ï¼šæ·¡å†°è— */
            margin: 0;
            padding-bottom: 80px;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .tab-active { color: #2C5282; border-bottom: 3px solid #2C5282; }
        .banner-mask {
            height: 250px;
            background-size: cover;
            background-position: center;
            border-radius: 0 0 40px 40px;
        }
        /* è®“ä¸»å…§å®¹ä¸Šç§»èˆ‡ Banner åœ“å¼§éŠœæ¥ */
        .main-content {
            margin-top: -30px;
            position: relative;
            z-index: 10;
        }
    </style>
</head>
<body>

<div id="app">
    <header class="relative">
        <div class="banner-mask shadow-lg" :style="{ backgroundImage: 'url(japan2026.jpg)' }"></div>
        
        <div class="absolute bottom-12 right-4 flex space-x-2">
            <button v-for="tab in tabs" :key="tab.id" 
                    @click="currentTab = tab.id"
                    class="p-3 rounded-full shadow-lg transition-all"
                    :class="currentTab === tab.id ? 'bg-blue-600 text-white' : 'bg-white/80 text-blue-800'">
                <i :data-lucide="tab.icon" class="w-5 h-5"></i>
            </button>
        </div>
    </header>

    <main class="main-content px-4">
        
        <div v-if="currentTab === 'schedule'">
            <div class="flex overflow-x-auto space-x-4 py-4 hide-scrollbar">
                <div v-for="day in days" :key="day.date" 
                     @click="selectedDate = day.date"
                     class="flex flex-col items-center min-w-[60px] p-3 rounded-2xl transition-all"
                     :class="selectedDate === day.date ? 'bg-blue-500 text-white shadow-md' : 'bg-white text-gray-500'">
                    <span class="text-xs font-bold uppercase">{{ day.week }}</span>
                    <span class="text-xl font-bold">{{ day.dayNum }}</span>
                </div>
            </div>

            <div class="bg-blue-50/80 rounded-2xl p-4 mb-4 flex items-center justify-between border border-blue-100">
                <div class="flex items-center">
                    <i data-lucide="cloud-snow" class="w-8 h-8 text-blue-400 mr-3"></i>
                    <div>
                        <div class="text-lg font-bold text-blue-900">-2Â°C <span class="text-sm font-normal text-blue-600">(é«”æ„Ÿ -6Â°C)</span></div>
                        <div class="text-xs text-blue-700">å»ºè­°ï¼šç™¼ç†±è¡£+é˜²é¢¨åšç¾½çµ¨å¤–å¥—</div>
                    </div>
                </div>
                <div class="text-right text-xs text-blue-400">Sapporo</div>
            </div>

            <div id="sortable-list" class="space-y-6">
                <div v-if="selectedDate === '2026-02-11'" class="bg-gradient-to-r from-blue-600 to-blue-400 rounded-3xl p-5 text-white shadow-lg">
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-sm opacity-80">Flight Info</span>
                        <i data-lucide="plane" class="w-5 h-5"></i>
                    </div>
                    <div class="flex justify-between items-center">
                        <div class="text-center">
                            <div class="text-2xl font-bold">TPE</div>
                            <div class="text-xs">08:10</div>
                        </div>
                        <div class="flex flex-col items-center flex-1 px-4">
                            <div class="text-[10px] opacity-70">CI156 (3h 25m)</div>
                            <div class="w-full h-[1px] bg-white/30 my-2 relative">
                                <div class="absolute -top-1 left-1/2 -translate-x-1/2 bg-white rounded-full w-2 h-2"></div>
                            </div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold">KIX</div>
                            <div class="text-xs">11:35</div>
                        </div>
                    </div>
                </div>

                <div v-for="(item, index) in filteredSchedules" :key="item.id" class="relative">
                    <div v-if="index >= 0" class="flex items-center py-2 px-6 text-gray-400 text-xs">
                        <div class="border-l-2 border-dashed border-blue-200 h-8 ml-2 mr-4"></div>
                        <i data-lucide="car" class="w-3 h-3 mr-1"></i>
                        <span>{{ item.travelTime || '15 min' }}</span>
                    </div>

                    <div @click="openGoogleMap(item.name)" class="glass-card rounded-2xl p-4 shadow-sm flex items-start gap-3 active:scale-95 transition-transform cursor-pointer">
                        <div class="bg-blue-100 p-2 rounded-xl">
                            <i :data-lucide="getIcon(item.type)" class="w-5 h-5 text-blue-600"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="font-bold text-gray-800">{{ item.name }}</h3>
                            <p class="text-xs text-gray-500 mt-1 line-clamp-1">{{ item.note }}</p>
                            <div class="flex gap-2 mt-2">
                                <span class="text-[10px] bg-white px-2 py-0.5 rounded border border-gray-100">{{ item.time }}</span>
                                <span v-if="item.price" class="text-[10px] bg-yellow-50 text-yellow-700 px-2 py-0.5 rounded">Â¥{{ item.price }}</span>
                            </div>
                        </div>
                        <button @click.stop="editItem(item)" class="text-gray-300">
                            <i data-lucide="more-vertical" class="w-5 h-5"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div v-if="currentTab === 'info'" class="space-y-4 pt-4">
            <div class="bg-white rounded-2xl p-5 shadow-sm">
                <h3 class="font-bold text-blue-800 mb-4 flex items-center">
                    <i data-lucide="refresh-cw" class="w-4 h-4 mr-2"></i> åŒ¯ç‡æ›ç®— (ç•¶æ—¥)
                </h3>
                <div class="flex items-center gap-4">
                    <input v-model="jpy" type="number" placeholder="JPY 1000" class="w-full bg-gray-50 border-0 rounded-xl p-3 focus:ring-2 focus:ring-blue-400">
                    <i data-lucide="arrow-right" class="text-gray-300"></i>
                    <div class="w-full bg-blue-50 text-blue-600 font-bold rounded-xl p-3">
                        TWD {{ (jpy * 0.21).toFixed(0) }}
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-2 gap-4">
                <div class="bg-red-50 p-4 rounded-2xl border border-red-100 text-red-700">
                    <div class="text-xs opacity-70">æ•‘è­·è»Š</div>
                    <div class="text-xl font-bold">119</div>
                </div>
                <div class="bg-blue-50 p-4 rounded-2xl border border-blue-100 text-blue-700">
                    <div class="text-xs opacity-70">è­¦å¯Ÿå±€</div>
                    <div class="text-xl font-bold">110</div>
                </div>
            </div>
        </div>

        <div v-if="currentTab === 'cost'" class="pt-4">
            <div class="bg-blue-600 rounded-3xl p-6 text-white mb-6 shadow-xl text-center">
                <div class="text-sm opacity-80 mb-1">ç¸½èŠ±è²»ç´¯è¨ˆ</div>
                <div class="text-3xl font-bold">Â¥ 128,450</div>
            </div>
            
            <div class="space-y-3">
                <div v-for="c in costs" class="bg-white rounded-2xl p-4 flex justify-between items-center">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-lg">ğŸ›ï¸</div>
                        <div>
                            <div class="font-bold text-gray-800">{{ c.name }}</div>
                            <div class="text-[10px] text-gray-400">{{ c.date }} | {{ c.pay }}</div>
                        </div>
                    </div>
                    <div class="font-bold text-blue-600">Â¥ {{ c.amount }}</div>
                </div>
            </div>
        </div>

    </main>

    <button v-if="currentTab === 'schedule' || currentTab === 'cost'" 
            class="fixed bottom-6 right-6 w-14 h-14 bg-blue-600 text-white rounded-full shadow-2xl flex items-center justify-center active:scale-90 transition-transform z-50">
        <i data-lucide="plus" class="w-8 h-8"></i>
    </button>

    <div class="h-20"></div>
</div>

<script>
    const { createApp, ref, onMounted, computed } = Vue;

    createApp({
        setup() {
            const currentTab = ref('schedule');
            const selectedDate = ref('2026-02-11');
            const jpy = ref(null);
            
            const tabs = [
                { id: 'schedule', icon: 'map-pin' },
                { id: 'info', icon: 'info' },
                { id: 'shopping', icon: 'shopping-cart' },
                { id: 'cost', icon: 'wallet' }
            ];

            const days = [
                { week: 'Wed', dayNum: '11', date: '2026-02-11' },
                { week: 'Thu', dayNum: '12', date: '2026-02-12' },
                { week: 'Fri', dayNum: '13', date: '2026-02-13' },
                { week: 'Sat', dayNum: '14', date: '2026-02-14' },
                { week: 'Sun', dayNum: '15', date: '2026-02-15' }
            ];

            const schedules = ref([
                { id: 1, date: '2026-02-11', type: 'æ™¯é»', name: 'é—œè¥¿åœ‹éš›æ©Ÿå ´', note: 'æŠµé”å¾Œå…ˆæ› JR Pass', time: '11:35', travelTime: '45 min' },
                { id: 2, date: '2026-02-11', type: 'ç¾é£Ÿ', name: 'ä¸€è˜­æ‹‰éºµ', note: 'é“é “å €åˆ†åº—', time: '13:00', travelTime: '15 min' },
                { id: 3, date: '2026-02-11', type: 'ä½å®¿', name: 'é›£æ³¢æ—¥èˆªé…’åº—', note: 'Check-in', time: '15:00' }
            ]);

            const costs = ref([
                { name: 'æ©Ÿå ´ç‰¹æ€¥ Haruka', amount: '2,800', date: '2/11', pay: 'ç¾é‡‘' },
                { name: 'è—¥å¦åº—è²·çœ¼ç½©', amount: '1,500', date: '2/11', pay: 'ä¿¡ç”¨å¡' }
            ]);

            const filteredSchedules = computed(() => {
                return schedules.value.filter(s => s.date === selectedDate.value);
            });

            const getIcon = (type) => {
                const map = { 'æ™¯é»': 'camera', 'ä½å®¿': 'home', 'ç¾é£Ÿ': 'utensils-crossings', 'èˆªç­': 'plane', 'è³¼ç‰©': 'bag' };
                return map[type] || 'map-pin';
            };

            const openGoogleMap = (query) => {
                window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`, '_blank');
            };

            onMounted(() => {
                lucide.createIcons();
                // åˆå§‹åŒ–æ‹–æ‹½æ’åº
                const el = document.getElementById('sortable-list');
                if(el) {
                    Sortable.create(el, {
                        animation: 150,
                        ghostClass: 'bg-blue-50'
                    });
                }
            });

            return {
                currentTab, tabs, days, selectedDate, schedules, filteredSchedules, costs, jpy,
                getIcon, openGoogleMap
            };
        }
    }).mount('#app');
</script>
</body>
</html>